var FacebookStrategy = require('passport-facebook').Strategy;

var strategy = {};

strategy.facebook = new FacebookStrategy({
  clientID : "653014024831372",
  clientSecret: "FACEBOOK_APP_SECRET_HERE",
  callbackURL: "FACEBOOK_APP_CALLBACK_URL_HERE",
  profileFields: ['id', 'name','picture.type(large)', 'emails', 'gender', 'profileUrl']  
}, function(accessToken, refreshToken, profile, done){
  // THIS IS EXAMPLE CODE, YOU NEED TO ADAPT THIS INTO YOUR POSTGRE SYNTAX TO SAVE THE USER INTO THE DATABASE.
  User.findOrCreate({
    id: "you dont need to add this in a SQL db because the id value is generated by itself (you need to setup your table to do this)",
    providerID: profile.id, 
    provider: provider.provider, 
    name: profile.name.givenName,
    lastname: profile.name.familyName,
    profilePhoto: profile.photos[0].value,
    profileUrl: profile.profileUrl
  }, function(err, user){
    done(null, user); // here you pass the User object to passport after you saved it in the database.
  });
});


// IMPORTANT NOTE: you need to edit this code, is not going to work how it is.


module.exports = strategy;

//This file is oriented to add more strategies (google, twitter, github, etc...) all in one place.